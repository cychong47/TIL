(책) NHN은 이렇게 한다. 소프트웨어 품질 관리
0
SHARES
누군가의 말을 빌리자면 품질 관리의 바이블(?)이라고 하는.
내용면에서는 특별한 건 없지만, 그래도 국내에서는 SW를 잘한다고 하는 사람들이 많이 가는 회사이고, 누구못지 않게 SW 문화가 좋을 거라고 생각하는 회사라 어떤 고민을 하고 어떻게 SW 품질을 위해 노력하는 지 알 수 있게 해주는 유일한 책이다.  

외국의 많은 회사처럼 사내에 노하우 등을 많이 공유하는 좋은 모습을 보이고 있고, 실제 제공되는 서비스의 독점성이나 중립적이지 못한 언론 관련 내용은 맘에 들지 않지만 그래도 개발자 입장에서는 이렇게 현실적인 내용을 공유해주는게 감사할 따름
2009년, 2010년에 있던 일이라 벌써 옛날 이야기이고, 지금도 그러는 지는 알 수 없다는 게 아쉬울 따름.  
SW의 생산성에 대해서도 참고할 만한 정의를 내리고 있다. 특별히 SW 생산성 보다는 품질 지표로 생산성을 보겠다는 생각에는 나도 동감. 관리하는 사람이 그렇게 보질 않아 문제지만.  

## Coding Convention

### 적용 결과 좋았던 점  
* 코드 스타일이 통일되어 소스 코드 가독성 향상
* 소스 코드 가독성 향상으로 서스테이닝이나 코드 리뷰에 도움이 됨 
* 코딩 컨벤션에 대한 학습 효과가 있음 

### 적용할 때 어려웠던 점  
* 프로젝트별 특성에 따라 회사 전체 표준을 지키기 힘든 경우가 있고 기존 코드에 대해 소급 적용하는 것은 부담이 큼  
* 일부 개발 언어(Objetive-C)는 자동 검사 도구가 지원되지 않아 표준 준수 여부 확인에 시간이 많이 소요됨  
* 코딩 컨벤션이나 자동 검사 도구가 빈번하게 업데이트되어 번거로운 점이 있음 
* 준수율이 파일 단위로 측정되어 파일에 하나라도 준수하지 않은 사항이 있으면 준수율에 반영되지 않음.  

## Code Review

### 적용 결과 좋았던 점  
* 좀 더 좋은 코드 작성에 대해 공유하거나 코드 개선에 대한 의견 공유가 가능(학습 효과, 실력 향상)
* 코드를 작성할 때 좀 더 신중하게 되며, 로직상의 코딩 실수나 잘못된 코드 습관을 발견하여 고칠 수 있었음  
* 프로젝트의 전체적인 내용 파악에 도움이 됨(전체 시스템 이해, 업무 이해도 향상) 
* 인지하지 못한 오류를 QA 단계 이전에 발견해 수정할 수 있음
* 기존에 비공식적으로 진행되던 팀 내 리뷰가 정형화되어 리뷰 수행에 도움이 됨  
* 신입/신규 입사자, 주니너 개발자 코드에 대한 코칭 기회가 됨 
* 로직 오류 수정에 도움이 됨 

### 적용할 때 어려웠던 점  
* 온라인 코드 리뷰 협업 도구인 Crucile을 권장 사용자보다 많이 사용하면 성능 문제로 리뷰 진행이 어려움 
* 실제로는 오프라인 리뷰를 진행하고 리뷰 수행율을 측정하기 위해 온라인 코드 리뷰 협업 도구에 기록을 남겨야 함 
* 리뷰를 수행하려면 별도의 리소스가 필요하며 서비스나 과제 이해도가 높아야 한다는 점이 어려움(이해가 부족한 상태에서 리뷰할 때는 비즈니스 로직 리뷰에 한계가 있음) 
* 온라인 리뷰는 연관성을 고려하여 코드 리뷰를 수행하기가 어려움(오프라인 리뷰가 적합) 
* 리유버 일정을 고려한 리뷰 요청이 어려움  
* 프로젝트 기간 중 개발과 리뷰의 병행은 일정상 어려움이 있음 
* 코드 리뷰 수행률 수치를 맞추기 위한 형식적인 리뷰 진행 

## Code coverage

### 적용 결과 좋았던 점  
* 단위 테스트가 쉽도록 코드를 설계하고 개발함  
* 단위 테스트를 작성하면서 기존 소스 코드에서 리팩토링할 부분이 명확히 드러나고 좀 더 나은 설계를 할 수 있게 됨  
* 서스테이닝을 할 때 오류 확인에 도움이 됨  
* 소스 코드를 수정하고 나서 자체 검증에 수동 코드 작성 없이 이전 테스트 코드를 재활용할 수 있어 편리함  
* 소스 코드를 수정할 때 코드 정상 동작 여부나 부작용을 확인할 수 있음  
* 비즈니르 로직 객체나 데이터 접근 객체에 대한 개별 검증 가능 
* 실제 서비스에서는 드물게 발생하는 예외적인 케이스에 대한 테스트가 가능  
* 전체 시스템이 구성되지 않은 상태에서도 테스트를 통한 기능 확인이 쉬움  
* 기존 모듈을 수정할 때 회귀 테스트로 오동작할 뻔한 경우를 막은 경우가 있음  
* 테스트를 작성하는 과정에서 자연스럽게 코드 리뷰가 이루어지므로 완성된 코드를 다시 수정할 때 발생하는 버그 감소 

### 적용할 때 어려웠던 점  
* 테스트 코드 작성에 많은 시간이 소요되어 개발 일정에 무리가 있음  
* 회사에서 요구하는 지표를 산출하는 데 커버리지 측정 도구를 수정해야 함 
* 노하우와 지식 부족으로 다양한 경우(예를 들면 Mock처리, DB관련, Action 클래스, UI코드가 많은 경우 등)에 대한 단위 테스트를 작성하기 어려움  
* 소스 코드를 변경할 때 테스트 코드도 함게 변경해야 함

## Static Analysis

### 적용 결과 좋았던 점  
* 생각지 못한 NullPointerException 발생 가능성을 사전에 방지  
* 테스트할 때 발견하지 못한 에러를 찾아내어 수정함으로써 사전에 장애 방지 
* QA에서 발견하기 어려운 버그도 검출하여 수정 가능  
* 결함 수정 과정에서 프로그래밍 언어에 대해 평소 간과했던 부분을 발견하게 되어 학습 효과가 있음 
* 디거빙 도구(컴파일러)에서 검출하지 못한 오류 확인에 도움이 됨  
* 코드 리뷰로 쉽게 식별이 되지 않는 잠재 오류를 찾아 수정할 수 있음  

### 적용할 때 어려웠던 점  
* 레거시 코드의 경우 코드 수정에 대한 위험 부담이 큼  

## Complexity analysis

### 적용 결과 좋았던 점  

* 코드가 간결해져 가독성이 높아짐  
* 복잡하지 않은 코드를 작성하려는 노력으로 복잡도 높은 코드가 감소함  
* 코드 복잡도를 낮춘 결과 테스트 코드를 작성하기가 쉬워짐  
* 복잡도 높은 코드를 분기해 코드 가독성을 높아짐  
* 평소 메소드를 길게 작성하는 습관이 개선됨  
* 코드 리팩토링 대상을 파악하는데 도움이 됨  

### 적용할 때 어려웠던 점  
* 레거시 코드의 복잡도를 낮추려면 코드의 리팩토링이 필요한데, 리팩토링하고 난 후 안정성에 대한 검증이 쉽지 않아 수정하기 어려움  


5가지 면에서 어떤 도구를 사용해서 어떤 점을 측정하고, 개선하려고 노력하는 지, 그리고 목표 수준은 어떤 지 등을 설명하고 있다. 실제 각 항목 별로 100점 만점을 목표로 하는 것이 아니라 현실적인 수준과 NHN의 현재 수준을 실제로(2009년 정보지만) 보여주고 있어 참고할 만 하다.  
각 항목별 개발자들의 피드백을 보면 비슷하다(아니 5년 전 내용이니 5년 정도 뒤떨어졌다고 봐야 하나? 그렇지는 않을 듯)  
뭔가 변화를 주는 것이나, 의미없는(?) 수치화, 기존 코드의 수정에 대한 부담감. Test coverage 를 높이기 위해 들이는 노력에 대한 부담감, Online code review만으로 부족해 결국 offline code review를 하고 다시 online code review를 해야 하는 불합리성에 대한 고민 등은 내가(스스로 그리고 주변 사람들로부터) 보고 느낀 것과 크게 다르지 않다.  

## 적용 효과 순

* 코드 커버리지 25%  
* 정적 분석 23%  
* 코드 리뷰 22%
* 코딩 컨벤션 15%
* 사이클로매틱 복잡도 15%

## 적용 비용 순

* 코드 커버리지 29%  
* 코드 리뷰 23%
* 정적 분석 17%  
* 코딩 컨벤션 17%
* 사이클로매틱 복잡도 14%

책을 쓴 사람들은 품질관리하는 부서에 있는 사람들이다 보니 실제 저런 활동의 주체가 되어야 하는 개발자들의 의견은 피드백으로 기술된 내용으로 한정된다. 그래도 저 책에 기술된 내용과 크게 다르지 않을 것 같다. 그렇지 않으면 저 책을 쓴 사람들이 회사내에서 욕 먹을 각오를 했어야 하는데 그렇게까지 없는 내용을 쓰지는 않았을 테니.
결국 개발 문화를 변화시키는 대는 개개인의 노력이 가장 중요하지만, 합리적인 접근을 통해 점진적인 변화를 유도해 가는 것이 가장 중요하다고 생각된다. 그렇지 않으면 실제 품질이 높아져 품질 지표가 올라가는 것이 아니라 품질 지표만 올라가는 현실과 동떨어진 숫자만 남게 될 수 있기 때문이다. 아울러 이런 활동을 할 때는 개발자들에게 의도부터 방법까지 충분한 설명을 통해 공감을 얻어야 하고, 개발자들이 필요한 정보를 충분히 받을 수 있도록 지원 체계를 만들어야 한다.
지금처럼 주먹구구식으로 감시 항목만 늘어나는 한 숫자 뿐인 품질 수치만 좋아질 거다. 적어도 개발자들이 고통받는 혹은 들이는 노력에 비해 품질 향상은 아주 미비할 것이다. 누굴 위한 노력인지 정말 궁금할 뿐.